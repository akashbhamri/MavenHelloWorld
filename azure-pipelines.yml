trigger:
- main

stages:
- stage: Build
  displayName: "Build Stage"
  jobs:
  - job: BuildJob
    steps:
    - script: echo "Building the application..."
      displayName: "Build step"

- stage: Deploy
  displayName: "Deploy Stage"
  dependsOn: Build
  jobs:
  - deployment: DeployToTest
    environment: test     # <-- important (weâ€™ll add gate here)
    strategy:
      runOnce:
        deploy:
          steps:
          - script: echo "Deploying to test environment..."
            displayName: "Deploy step"
